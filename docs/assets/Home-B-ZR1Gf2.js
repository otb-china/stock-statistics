import{d as j,r as g,a as M,w as X,b as u,c as w,o as d,n as G,e as t,f as m,_ as L,g as F,h as c,i as S,F as C,j as T,s as K,L as h,k as Q,l as B,t as N,m as V}from"./index-CFLTPb0y.js";import{s as Z}from"./data-BCZFxGvg.js";const ee=j({__name:"Date",props:{defaultDate:{},clearable:{type:Boolean,default:!1},className:{},placeholder:{}},emits:["dateChange"],setup(z,{emit:v}){const n=g(),l=g(!1),y=g(M(new Date).format("YYYY-MM-DD").split("-")),x=v,D=z,b=s=>{y.value=s.selectedValues,n.value=s.selectedValues.join("-"),l.value=!1,x("dateChange",n.value)};X(()=>D.defaultDate,()=>{const{defaultDate:s}=D;s&&(y.value=(s||M(new Date).format("YYYY-MM-DD")).split("-"),n.value=s)},{immediate:!0});const Y=()=>{y.value=M(new Date).format("YYYY-MM-DD").split("-"),n.value=""};return(s,r)=>{const k=u("van-field"),$=u("van-date-picker"),U=u("van-popup");return d(),w("div",{class:G(s.className)},[t(k,{readonly:"",clickable:"",modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=f=>n.value=f),placeholder:s.placeholder,"right-icon":s.clearable&&n.value?"cross":"",onClickInput:r[1]||(r[1]=f=>l.value=!0),onClickRightIcon:Y},null,8,["modelValue","placeholder","right-icon"]),t(U,{show:l.value,"onUpdate:show":r[4]||(r[4]=f=>l.value=f),position:"bottom"},{default:m(()=>[t($,{modelValue:y.value,"onUpdate:modelValue":r[2]||(r[2]=f=>y.value=f),onConfirm:b,onCancel:r[3]||(r[3]=f=>l.value=!1)},null,8,["modelValue"])]),_:1},8,["show"])],2)}}}),ae=L(ee,[["__scopeId","data-v-0eb89f07"]]),le={style:{padding:"2%"}},ne={class:"flex-wrap"},oe={class:"back-gauge"},te={key:0,class:"flex-row",style:{width:"98%",margin:"10px 1%"}},ue={class:"shadow",style:{margin:"1%"}},se={class:"flex-row P6"},re={class:"MX6 FS15"},me={class:"align-center MT10 FS14"},de={class:"P24"},ve=j({__name:"Home",setup(z){const v=g(!1),n=g([]),l=g({type:"add",show:!1,form:{},data:[],monthData:[],index:0}),y=a=>{switch(a){case"2.0":l.value.form.value=70;break;case"3.0":l.value.form.value=120;break}l.value.form.orderDate=M(new Date).format("YYYY-MM-DD")},x=a=>{l.value.form.orderDate=a},D=(a,e)=>{navigator.clipboard.writeText(JSON.stringify(a)),K(`${e}数据复制成功`)},b=()=>{const a={};for(let i of l.value.data)if(i.orderDate){const p=i.orderDate.substring(0,7);a[p]?a[p]+=Number(i.value):a[p]=Number(i.value)}const e=[];for(let i in a)e.push({month:i,value:a[i]});l.value.monthData=e},Y=F(()=>l.value.data.reduce((a,e)=>a+Number(e.value),0)),s=F(()=>a=>a.num===0?{backgroundColor:"#E47471",color:"#ffffff"}:a.num>0&&a.num<=a.warnNum?{backgroundColor:"#DCA551",color:"#ffffff"}:{}),r=()=>{v.value&&h.data.setter(n.value),v.value=!v.value},k=g(!0),$=()=>{const a=l.value.type;if(a==="add"&&(k.value&&(l.value.form.title==="2.0"&&n.value.forEach(e=>{e.name==="风扇"&&(e.num-=1),e.name==="塑料盒"&&(e.num-=2),e.name==="钢丝软管"&&(e.num-=2),e.name==="直法兰"&&(e.num-=1),e.name==="2.0包装箱"&&(e.num-=1),e.name==="2.0饮料瓶"&&(e.num-=1)}),l.value.form.title==="3.0"&&n.value.forEach(e=>{e.name==="风扇"&&(e.num-=1),e.name==="塑料盒"&&(e.num-=1),e.name==="直法兰"&&(e.num-=1),e.name==="花瓶"&&(e.num-=1),e.name==="90度弯头"&&(e.num-=3),e.name==="45度弯头"&&(e.num-=1),e.name==="50管"&&(e.num-=1),e.name==="内50软管"&&(e.num-=1),e.name==="6型号盖"&&(e.num-=1),e.name==="3.0矿泉水桶"&&(e.num-=1),e.name==="3.0吸管"&&(e.num-=1)}),h.data.setter(n.value)),l.value.data.unshift(l.value.form)),a==="upd"){const e=l.value.index;e>=0&&l.value.data.splice(e,1,l.value.form)}l.value.show=!1,h.orderData.setter(l.value.data),l.value.form={},b()},U=(a,e)=>{l.value.type="upd",l.value.index=e,l.value.form={...a},l.value.show=!0},f=a=>{l.value.data.splice(a,1),h.orderData.setter(l.value.data),b()};return(()=>{h.data.getter()&&(n.value=h.data.getter()),n.value.some(a=>a.name==="风扇")||n.value.push({name:"风扇",num:0,warnNum:2}),n.value.some(a=>a.name==="塑料盒")||n.value.push({name:"塑料盒",num:0,warnNum:5}),n.value.some(a=>a.name==="钢丝软管")||n.value.push({name:"钢丝软管",num:0,warnNum:4}),n.value.some(a=>a.name==="直法兰")||n.value.push({name:"直法兰",num:0,warnNum:2}),n.value.some(a=>a.name==="2.0包装箱")||n.value.push({name:"2.0包装箱",num:0,warnNum:2}),n.value.some(a=>a.name==="2.0饮料瓶")||n.value.push({name:"2.0饮料瓶",num:0,warnNum:2}),n.value.some(a=>a.name==="花瓶")||n.value.push({name:"花瓶",num:0,warnNum:1}),n.value.some(a=>a.name==="90度弯头")||n.value.push({name:"90度弯头",num:0,warnNum:3}),n.value.some(a=>a.name==="45度弯头")||n.value.push({name:"45度弯头",num:0,warnNum:1}),n.value.some(a=>a.name==="50管")||n.value.push({name:"50管",num:0,warnNum:1}),n.value.some(a=>a.name==="内50软管")||n.value.push({name:"内50软管",num:0,warnNum:1}),n.value.some(a=>a.name==="6型号盖")||n.value.push({name:"6型号盖",num:0,warnNum:1}),n.value.some(a=>a.name==="3.0矿泉水桶")||n.value.push({name:"3.0矿泉水桶",num:0,warnNum:1}),n.value.some(a=>a.name==="3.0吸管")||n.value.push({name:"3.0吸管",num:0,warnNum:1}),h.orderData.getter()&&(l.value.data=Z(h.orderData.getter(),"desc","orderDate")),b()})(),(a,e)=>{const i=u("el-input-number"),p=u("el-button"),I=u("van-cell"),P=u("van-button"),O=u("van-swipe-cell"),q=u("van-cell-group"),E=u("el-radio-button"),H=u("el-radio-group"),R=u("van-field"),W=u("el-switch"),A=u("van-popup");return d(),w(C,null,[c("div",le,[c("div",ne,[(d(!0),w(C,null,T(n.value,o=>(d(),w("div",{class:"shadow BR5",key:o.index,style:Q([s.value(o),{width:"44%",margin:"1%",padding:"2%"}])},[c("h4",oe,N(o.name),1),t(i,{class:"MT6 W100",disabled:!v.value,modelValue:o.num,"onUpdate:modelValue":_=>o.num=_,min:0,max:1e4},null,8,["disabled","modelValue","onUpdate:modelValue"]),v.value?(d(),B(i,{key:0,class:"MT6 W100",modelValue:o.warnNum,"onUpdate:modelValue":_=>o.warnNum=_,min:0,max:1e4},null,8,["modelValue","onUpdate:modelValue"])):S("",!0)],4))),128))]),v.value?(d(),w("div",te,[t(p,{type:"success",style:{flex:"1"},onClick:e[0]||(e[0]=o=>D(n.value,"备料"))},{default:m(()=>[...e[7]||(e[7]=[V("复制备料数据",-1)])]),_:1}),t(p,{type:"success",style:{flex:"1"},onClick:e[1]||(e[1]=o=>D(l.value.data,"订单"))},{default:m(()=>[...e[8]||(e[8]=[V("复制订单数据",-1)])]),_:1})])):S("",!0),t(p,{style:{width:"98%",margin:"20px 1%"},size:"large",type:v.value?"primary":"success",onClick:r},{default:m(()=>[V(N(v.value?"保存":"调整"),1)]),_:1},8,["type"]),c("div",ue,[c("div",se,[(d(!0),w(C,null,T(l.value.monthData,o=>(d(),w("div",{key:o.month,class:"shadow M6 P6 bolder",style:{color:"#727781"}},[c("div",re,N(o.month),1),c("div",me,N(o.value),1)]))),128))]),t(q,null,{default:m(()=>[t(I,{value:`合计 ${Y.value}`},{title:m(()=>[t(p,{size:"small",type:"primary",plain:"",onClick:e[2]||(e[2]=o=>l.value.show=!0)},{default:m(()=>[...e[9]||(e[9]=[V("新增",-1)])]),_:1})]),_:1},8,["value"]),(d(!0),w(C,null,T(l.value.data,(o,_)=>(d(),B(O,{key:_},{right:m(()=>[t(P,{square:"",type:"primary",style:{height:"100%"},text:"编辑",onClick:J=>U(o,_)},null,8,["onClick"]),t(P,{square:"",type:"danger",style:{height:"100%"},text:"删除",onClick:J=>f(_)},null,8,["onClick"])]),default:m(()=>[t(I,{title:`${l.value.data.length-_}：吸尘器${o.title}`,label:o.orderDate,value:`收入 ${o.value}`},null,8,["title","label","value"])]),_:2},1024))),128))]),_:1})])]),e[11]||(e[11]=c("div",{style:{height:"25vh"}},null,-1)),t(A,{show:l.value.show,"onUpdate:show":e[6]||(e[6]=o=>l.value.show=o),position:"bottom","destroy-on-close":""},{default:m(()=>[c("div",de,[t(H,{modelValue:l.value.form.title,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.form.title=o),class:"MB15",onChange:y},{default:m(()=>[t(E,{label:"2.0",value:"2.0"}),t(E,{label:"3.0",value:"3.0"})]),_:1},8,["modelValue"]),t(R,{modelValue:l.value.form.value,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.form.value=o),type:"digit",placeholder:"收入",clearable:""},null,8,["modelValue"]),t(ae,{class:"MT15",placeholder:"下单日期","default-date":l.value.form.orderDate,onDateChange:x},null,8,["default-date"]),l.value.type==="add"?(d(),B(W,{key:0,modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=o=>k.value=o),"active-text":"计算备料",class:"MT15"},null,8,["modelValue"])):S("",!0),t(p,{type:"primary",size:"large",style:{width:"100%"},onClick:$,class:"MT50",disabled:!(l.value.form.title&&l.value.form.value)},{default:m(()=>[...e[10]||(e[10]=[V(" 提交 ",-1)])]),_:1},8,["disabled"])])]),_:1},8,["show"])],64)}}}),ce=L(ve,[["__scopeId","data-v-3e713098"]]);export{ce as default};
